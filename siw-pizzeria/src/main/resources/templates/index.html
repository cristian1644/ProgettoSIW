<!DOCTYPE html>
<html>

<head>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
	<title>
		SiwPizzeria - Homepage
	</title>
	<link rel="stylesheet" href="/css/stile.css" />
</head>

<body>
	<nav></nav>
	<!--HEADER-->
	<header>
		<div class="header-container">	
			<img id="siwPizzeria" src="/images/siwPizzeriaD.gif">
			
			<div class="search-container">
				<form class="search-form" th:action="@{/searchPizza}" method="POST" th:object="${searchPizza}">
					<div class="searchSubmit-container">
				    	<div class="form-group">
				        	<input class="search-input" required type="text" placeholder="Cerca una pizza..." th:field="${searchPizza.nome}" />
				        </div>
				        <button type="submit" class="search-button"><i class="fa fa-search"></i></button>
					</div>
					<div th:if="${#fields.hasErrors('nome')}" class="error-container">
						<span th:errors="*{nome}" class="error-message"></span>
					</div>
				</form>
			</div>
			
			<span>
				<a href="/" class="header-item">
								<img src="images/header/pizza.png" alt="Homepage" class="image">
								<span>HOMEPAGE</span>
				</a>
			</span>	
			<span>
				<a href="/redirectByRole" class="header-item">
								<img src="images/header/menu.png" alt="Menu" class="image">
								<span>MENU</span>
				</a>
			</span>	
			<span>
				<a href="/carrello" class="header-item">
					<img src="images/header/carrello.png" alt="Carrello" class="image">
					<span>CARRELLO</span>
					<span class="cart-count" th:if="${totalPizzaCount > 0}" th:text="${totalPizzaCount}"></span>
				</a>
			</span>		
			<span>
				<a href="/orari" class="header-item">
								<img src="images/header/orologio.png" alt="Orari" class="image">
								<span>ORARI</span>
				</a>
			</span>
			<span>
				<a th:href="${authentication != null ? '/user' : '/login'}" class="header-item">
			    	<img src="images/header/loginIcon.png" alt="Account" class="image">
					<span class="user-link">
				        <span>ACCOUNT</span>
				        <span th:if="${authentication != null}">
				        	<p id="user"><span th:text="${authentication.principal.username}">No Username</span></p>
				        </span>
					</span>
			   </a>
			</span>
		</div>
	</header>
	<section>
		<div class="row-flex-container">
			<div class="flip-img">
							<div class="flip-img-rotation">
								<div class="flip-img-front">
									<img src="/images/index-flip/gifOrdina.gif">
								</div>
								<div class="flip-img-back">
									<img src="/images/index-flip/feedback.png">
								</div>
							</div>
						</div>
			<span>
				<img src="/images/newLogo.png" width="35%" class="logo"/>
			</span>
			<div class="flip-img">
				<div class="flip-img-rotation">
					<div class="flip-img-front">
						<img src="/images/index-flip/occhiataMenu.png">
					</div>
					<div class="flip-img-back">
						<img src="/images/index-flip/registratiOra.png">
					</div>
				</div>
			</div>
		</div>
		<div><img id="slider-img"src="images/sliderTitle.png"></div>
		<!--SLIDER PIZZE PIU AMATE-->
		<div class="swiper-container primo-swiper">
		  <div class="swiper-wrapper primo-wrapper">
		    <div class="swiper-slide primo-swiper-slide">
				<div class="nome-pizza">Margherita</div>
				<img src="/images/swiper-pizze/margherita.jpg" alt="Pizza Margherita">
				<div class="price">€6.50</div>
			</div>
		    <div class="swiper-slide primo-swiper-slide">
				<div class="nome-pizza">Crostino</div>
				<img src="/images/swiper-pizze/crostino.jpg" alt="Pizza Crostino">
				<div class="price">€7.50</div>
		    </div>
		    <div class="swiper-slide primo-swiper-slide">
				<div class="nome-pizza">Patate</div>
				<img src="/images/swiper-pizze/patate.jpg" alt="Pizza Patate">
				<div class="price">€6.50</div>
			</div>
			<div class="swiper-slide primo-swiper-slide">
							<div class="nome-pizza">Wurstel e Patatine</div>
							<img src="/images/swiper-pizze/wurstel&patatine.jpg" alt="Pizza Wurstel e Patatine">
							<div class="price">€8.00</div>
						</div>
			<div class="swiper-slide primo-swiper-slide">
				<div class="nome-pizza">Diavola</div>
				<img src="/images/swiper-pizze/diavola.jpg" alt="Pizza Diavola">
				<div class="price">€8.00</div>
			</div>
			<div class="swiper-slide primo-swiper-slide">
							<div class="nome-pizza">Boscaiola</div>
							<img src="/images/swiper-pizze/boscaiola.jpg" alt="Pizza Boscaiola">
							<div class="price">€8.50</div>
						</div>
		    <!-- Aggiungi altre slide qui -->
		  </div>
		  <!-- Aggiungi i controlli opzionali se desideri -->
		  <div class="swiper-pagination"></div>
		  <div class="swiper-button-next primo-next"><i class="fa-solid fa-arrow-right"></i></div>
		  <div class="swiper-button-prev primo-prev"><i class="fa-solid fa-arrow-left"></i></div>
		<script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
		</div>
		<script>
		  var swiper = new Swiper('.primo-swiper', {
		    slidesPerView: 3,            // Numero di slide visibili contemporaneamente
		    spaceBetween: 10,            // Spazio tra le slide
		    autoplay: {
		      delay: 4000,               // Tempo in millisecondi tra le transizioni
		    },
		    pagination: {
		      el: '.swiper-pagination',  // Elemento della paginazione
		      clickable: true,           // Consente di cliccare sui puntini di paginazione
		    },
		    navigation: {
		      nextEl: '.primo-next', // Pulsante per andare alla slide successiva
		      prevEl: '.primo-prev', // Pulsante per tornare alla slide precedente
		    },
		    loop: true,                   // Abilita il loop infinito
		    speed: 500                    // Velocità della transizione
		  });
		</script>
		
		<div><img id="carosello-img"src="images/passione.png"></div>
		<!--CAROSELLO IMMAGINI-->
		<div class="carousel">
		        <div class="carousel-wrapper">
		            <div class="carousel-item">
		                <img src="/images/carosello-pizze/fotoPizza1.png" alt="Immagine 1">
		            </div>
		            <div class="carousel-item active">
		                <img src="/images/carosello-pizze/fotoPizza2.png" alt="Immagine 2">
		            </div>
		            <div class="carousel-item">
		                <img src="/images/carosello-pizze/fotoPizza3.png" alt="Immagine 3">
		            </div>
					<div class="carousel-item">
						<img src="/images/carosello-pizze/fotoPizza4.png" alt="Immagine 4">
					</div>
					<div class="carousel-item">
						<img src="/images/carosello-pizze/fotoPizza5.png" alt="Immagine 4">
					</div>
					<div class="carousel-item">
						<img src="/images/carosello-pizze/fotoPizza6.png" alt="Immagine 4">
					</div>
					<div class="carousel-item">
						<img src="/images/carosello-pizze/fotoPizza7.png" alt="Immagine 4">
					</div>
		        </div>
		        <button class="prev"><img src="/images/leftArrow.png" alt="Prev"></button>
		        <button class="next"><img src="/images/rightArrow.png" alt="Prev"></button>
		    </div>
		    <script>
				document.addEventListener('DOMContentLoaded', function () {
				    const carouselWrapper = document.querySelector('.carousel-wrapper');
				    const items = document.querySelectorAll('.carousel-item');
				    const prevButton = document.querySelector('.prev');
				    const nextButton = document.querySelector('.next');

				    let index = 2; // Indice iniziale per avere la terza immagine al centro
				    const totalItems = items.length;

				    function updateCarousel() {
				        // Calcola il movimento del carosello
						const offset = -index * 100 / 3 + 33.333; // Mostra 3 immagini per volta
						        carouselWrapper.style.transform = `translateX(${offset}%)`;

				        // Aggiorna le classi attive
				        items.forEach((item, i) => {
				            item.classList.toggle('active', i === index);
				        });
				    }

				    prevButton.addEventListener('click', () => {
				        index = (index > 0) ? index - 1 : totalItems - 1;
				        updateCarousel();
				    });

				    nextButton.addEventListener('click', () => {
				        index = (index < totalItems - 1) ? index + 1 : 0;
				        updateCarousel();
				    });

				    updateCarousel();
				});
			</script>
		
			
		<div class="row-flex-container">
					<div class="flip-img">
									<div class="flip-img-rotation">
										<div class="flip-img-front">
											<img src="/images/index-flip/quality.png">
										</div>
										<div class="flip-img-back">
											<img src="/images/index-flip/personale.gif">
										</div>
									</div>
								</div>
								
								<div class="flip-img">
									<div class="flip-img-rotation">
										<div class="flip-img-front">
											<img src="/images/index-flip/vieniATrovarci.png">
										</div>
										<div class="flip-img-back">
											<img src="/images/index-flip/wait.png">
										</div>
									</div>
								</div>
								
								<div class="flip-img">
									<div class="flip-img-rotation">
										<div class="flip-img-front">
											<img src="/images/index-flip/consegne.png">
										</div>
										<div class="flip-img-back">
											<img src="/images/index-flip/scegliOra.png">
										</div>
									</div>
								</div>
				</div>
		
	</section>
	<footer>
		<div class="footer-container">
			<div>p</div>
		</div>
	</footer>
</body>

</html>